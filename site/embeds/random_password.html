<!DOCTYPE html>
<html lang="en"> 
    
    <head>
        <title>shadow00dev</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://cdn.jsdelivr.net/npm/profanity-cleaner@latest"></script>
        <script>
                function passwords(length = 20, amount = 5, abc = true, ABC = true, numbers = true, symbols = true) {
                    // Error handling, possibly not needed depending on how input handling is done
                    if (!Number.isInteger(length) || length < 1 || !Number.isInteger(amount) || amount < 1) {
                        throw new Error('Length and amount must be integers greater than 0.');
                    }
                    if (typeof ABC !== 'boolean' || typeof abc !== 'boolean' || typeof numbers !== 'boolean' || typeof symbols !== 'boolean') {
                        throw new Error('ABC, abc, numbers and symbols must be boolean values.');
                    }
                
                    //Adds selected characters
                    const characters = [];
                    if (ABC) characters.push("ABCDEFGHIJKLMNOPQRSTUVWXYZ");
                    if (abc) characters.push("abcdefghijklmnopqrstuvwxyz");
                    if (numbers) characters.push("1234567890");
                    if (symbols) characters.push("~!@#$%^&*()_-+={[}]|:;<,>.?/");
                
                    if (characters.length == 0) throw new Error('No characters selected');
                
                    const getRandom = (choose) => choose[Math.floor(Math.random() * choose.length)]; //Gets a random character from the selected character group.
                
                    //Generates the passwords list then return the list.
                    const passwordList = [];
                    for (let count = 0; count < amount; count++) {
                        let password = "";
                        for (let add = 0; add < length; add++) {
                            const selectedSet = getRandom(characters);
                            password += getRandom(selectedSet);
                        }
                        if (!passwordList.includes(password)) passwordList.push(password);
                    }
                    return passwordList;
                }
        </script>
        <style>
            
            body {background-color: black;display:grid;place-items: start center;place-content: flex-start center;position: relative;-moz-user-select: none;-khtml-user-select: none;-webkit-user-select: none;-ms-user-select: none;user-select: none;}
            button {background-color: gray; border: 1px solid white;border-radius: 10px;margin-top: 5px;}
            button:hover {filter:brightness(80%);}
            textarea {height:25px;width:260px;resize: none;text-align: center;background-color: rgba(0, 0, 0, 0);border: solid 2px rgba(255, 255, 255, 0.301);border-radius: 10px;;outline:0px;color:white;overflow: hidden;font-size:15px;cursor:auto;margin-top: 10px;}
            input {height:20px;color:black;}
            label {color:white;float:right;}
            .object {position: fixed; top:0%;}
        </style>
    </head>
    <body onresize="validLength(true)">
        <br>
            <label>abc &gt; <input type="checkbox" id="abc" checked></label>
            <label>ABC &gt; <input type="checkbox" id="ABC" checked></label>
            <label>Numbers &gt; <input type="checkbox" id="numbers" checked></label>
            <label>Symbols &gt; <input type="checkbox" id="symbols" checked></label>
            <label>Length &gt; <input type="number" id="length" min="1" max="30" value="20" onchange="validLength()" style="width:fit-content;"></label>

        <button id="generaterandompassword"> Generate Random Password </button>

        <textarea id="output" readonly></textarea>

        <script>
            const button = document.getElementById("generaterandompassword");
            const output = document.getElementById("output");
            const lengthNum = document.getElementById("length");
            const abc = document.getElementById("abc");
            const ABC = document.getElementById("ABC");
            const numbers = document.getElementById("numbers");
            const symbols = document.getElementById("symbols");
            function validLength(window=false) {
                const width = 250
                if (lengthNum.value < 1) lengthNum.value = 1;
                if (lengthNum.value > 20 && output.offsetWidth < width) lengthNum.value = 20;
                if (lengthNum.value > 30 && output.offsetWidth > width) lengthNum.value = 30;
            }
            var key = "";
            button.addEventListener("click",() => {
                var values = [Number(lengthNum.value), abc.checked, ABC.checked, numbers.checked, symbols.checked];
                key = passwords(values[0], 1, values[1], values[2], values[3], values[4])[0];
                while (profanityCleaner.isProfane(key)) {
                    console.log("Password Generator: Bad word detected, regenerated.");
                    key = passwords(values[0], 1, values[1], values[2], values[3], values[4])[0];
                }
                document.getElementById("output").value = key;
            });
            output.addEventListener("click",() => {
                if (key != "") {
                    output.select();
                    output.setSelectionRange(0, 100);
                }
            });
        </script>
    </body>
</html>